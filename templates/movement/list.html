{% extends "base.html" %}
{% block content %}
<div class="flex justify-between items-center mb-4">
  <h1 class="text-2xl font-bold">Stock Movements</h1>
  <a href="{% url 'movement_create' %}" class="bg-green-600 text-white px-4 py-2 rounded">New</a>
</div>
<div class="bg-white rounded shadow overflow-x-auto">
  <table class="min-w-full">
    <thead class="bg-gray-100"><tr>
      <th class="p-2">Type</th><th class="p-2">Medicine</th><th class="p-2">Lot</th><th class="p-2">Qty</th><th class="p-2">To/From</th><th class="p-2">Ref</th><th class="p-2">When</th>
    </tr></thead>
    <tbody>
      {% for m in items %}
      <tr class="border-b">
        <td class="p-2">{{ m.get_move_type_display }}</td>
        <td class="p-2">{{ m.batch.medicine }}</td>
        <td class="p-2">{{ m.batch.lot_no }}</td>
        <td class="p-2">{{ m.quantity }}</td>
        <td class="p-2">{{ m.counterparty }}</td>
        <td class="p-2">{{ m.ref_no }}</td>
        <td class="p-2">{{ m.moved_at|date:"Y-m-d H:i" }}</td>
      </tr>
      {% empty %}
      <tr><td class="p-2" colspan="7">No movements.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
